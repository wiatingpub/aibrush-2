{"version":3,"sources":["pages/Login.tsx","pages/MainMenu.tsx","components/ImageThumbnail.tsx","components/ImagePopup.tsx","components/LoadMoreImages.tsx","pages/Images.tsx","components/TokenRefresher.tsx","components/Healthchecker.tsx","App.tsx","config.ts","reportWebVitals.ts","index.tsx","client/api.ts","client/base.ts","client/common.ts","lib/designer.ts","components/ImageEditor.tsx","lib/iconhelper.ts","pages/CreateImage.tsx","pages/InteractiveDesigner.tsx"],"names":["Login","props","useState","email","setEmail","emailSubmitted","setEmailSubmitted","code","setCode","err","setErr","onLogin","a","match","client","login","onVerify","verify","result","data","console","error","className","htmlFor","type","id","placeholder","value","onChange","e","target","onClick","preventDefault","aria-describedby","MainMenu","to","ImageThumbnail","apiUrl","image","onDelete","onFork","onDesign","src","updated_at","useEffect","img","document","getElementById","onerror","style","padding","width","margin","cursor","alt","label","imageStatusToIconClass","status","role","current_iterations","iterations","marginRight","enable_video","window","open","marginTop","ImagePopup","onClose","useRef","current","Modal","show","onHide","size","Header","closeButton","Title","Body","ref","phrases","join","LoadMoreImages","onLoadMore","isLoading","disabled","ImagesPage","api","history","useHistory","images","setImages","selectedImage","setSelectedImage","loadingMore","setLoadingMore","onForkImage","push","moment","add","valueOf","listImages","resp","loadImages","pollImages","reduce","max","Math","newImages","filter","findIndex","i","updatedImages","map","updatedImage","find","sort","b","timerHandle","setInterval","clearInterval","onDeleteImage","deleteImage","onDesignImage","setDesignerCurrentImageId","minUpdatedAt","forEach","min","TokenRefresher","onCredentialsRefreshed","credentials","interval","refreshToken","refresh","then","loginResult","Healthchecker","healthCheck","setHealthCheck","healthcheck","catch","display","config","httpClient","axios","AIBrushApi","undefined","localStorage","getItem","updateHttpClient","accessToken","defaults","headers","common","App","setCredentials","init","log","storedCredentials","JSON","parse","setItem","stringify","prompt","location","reload","path","exact","CreateImage","InteractiveDesigner","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","HealthcheckStatusEnum","ImageStatusEnum","UpdateImageInputStatusEnum","BASE_PATH","replace","BaseAPI","configuration","basePath","globalAxios","this","RequiredError","field","msg","name","Error","DUMMY_BASE_URL","assertParamExists","functionName","paramName","paramValue","setSearchParams","url","searchParams","URLSearchParams","search","objects","object","key","Array","isArray","delete","item","append","set","toString","serializeDataIfNeeded","requestOptions","nonString","isJsonMime","toPathString","pathname","hash","createRequestFunction","axiosArgs","axiosRequestArgs","options","request","AIBrushApiFp","localVarAxiosParamCreator","createImage","createImageInput","localVarUrlObj","URL","baseOptions","localVarRequestOptions","method","localVarQueryParameter","localVarHeaderParameter","query","headersFromBaseOptions","localVarPath","encodeURIComponent","String","getImage","download","getImageData","getThumbnailData","getVideoData","limit","direction","loginInput","processImage","refreshLoginInput","updateImage","updateImageInput","updateVideoData","body","verifyLoginInput","AIBrushApiAxiosParamCreator","localVarAxiosArgs","getDesignerCurrentImageId","removeItem","ImageEditor","encodedImage","onSave","onCancel","canvas","setCanvas","ctx","setCtx","brushSize","setBrushSize","brushColor","setBrushColor","isDrawing","setIsDrawing","lastX","setLastX","lastY","setLastY","c","getContext","Image","onload","drawImage","fillStyle","fillRect","height","getMousePos","rect","getBoundingClientRect","scaleX","scaleY","nativeEvent","MouseEvent","evt","x","clientX","left","y","clientY","top","TouchEvent","touches","handleMouseDown","mousePos","drawDot","beginPath","arc","PI","fill","handleMouseMove","moveTo","lineTo","strokeStyle","lineWidth","lineCap","stroke","handleMouseUp","handleCancel","onMouseDown","onMouseMove","onMouseUp","onTouchStart","onTouchMove","onTouchEnd","parseFloat","Footer","toDataURL","Pending","Processing","Completed","Saved","qs","substring","encoded_image","input","setInput","editingImage","setEditingImage","count","setCount","onSubmit","onImageSelected","file","files","loadImage","HTMLCanvasElement","base64","split","maxWidth","maxHeight","crop","loadParent","parentId","responseType","binaryImageData","Buffer","from","base64ImageData","parent","parseInt","checked","createElement","length","goBack","imageUri","setImage","currentImageId","setCurrentImageId","onPlay","loadImageData","fetchImage","timer","inprogress","playButton","renderPlayButton"],"mappings":"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","file":"static/js/main.9a7f04e9.chunk.js","sourcesContent":["// Login react component with hooks\nimport React, { useState, FC } from 'react';\nimport * as axios from \"axios\";\nimport { AIBrushApi, LoginResult } from \"../client/api\";\n\ninterface LoginProps {\n    httpClient: axios.AxiosInstance;\n    client: AIBrushApi;\n    onLogin: (loginResult: LoginResult) => void;\n}\n\nexport const Login: FC<LoginProps> = props => {\n    // login form accepts email only\n    const [email, setEmail] = useState(\"\");\n    const [emailSubmitted, setEmailSubmitted] = useState(false);\n    const [code, setCode] = useState(\"\");\n    const [err, setErr] = useState(\"\");\n\n    const onLogin = async () => {\n        // clear error\n        setErr(\"\");\n        // validate valid email\n        if (!email.match(/^[^@]+@[^@]+\\.[^@]+$/)) {\n            setErr(\"Invalid email address\");\n            return;\n        }\n        await props.client.login({\n            email\n        })\n        setEmailSubmitted(true);\n    }\n\n    const onVerify = async () => {\n        // clear error\n        setErr(\"\");\n        // attempt to verify code\n        try {\n            const result = await props.client.verify({\n                email,\n                code\n            });\n            props.onLogin(result.data);\n        } catch (err) {\n            console.error(err)\n            setErr(\"Failed to verify code\");\n        }\n    }\n\n    // bootstrap login form\n    return (\n        <div className=\"container\">\n            <div className=\"row\">\n                <div className=\"col-md-6 offset-md-3\">\n                    <div className=\"card\">\n                        <div className=\"card-body\">\n                            <h5 className=\"card-title\">Login</h5>\n                            {/* Display error if one is set */}\n                            {/* Use <p class=\"text-danger\" */}\n                            {err && <p className=\"text-danger\">{err}</p>}\n\n                            {/* If email submitted, show verify code form*/}\n                            {emailSubmitted && <div>\n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"verifyCode\">Verify Code</label>\n                                        <input type=\"text\" className=\"form-control\" id=\"verifyCode\" placeholder=\"Verification Code\" value={code} onChange={(e) => setCode(e.target.value)} />\n                                    </div>\n                                    {/* Cancel verification and go back to email */}\n                                    <button className=\"btn btn-secondary\" onClick={() => setEmailSubmitted(false)}>Cancel</button>&nbsp;\n                                    {/* Verify code */}\n                                    <button type=\"button\" className=\"btn btn-primary\" onClick={(e) => {\n                                        e.preventDefault();\n                                        onVerify();\n                                    }}>Verify</button>\n                                </div>\n                            }\n                            {/* Else, show login form */}\n                            {!emailSubmitted && <div>\n                                <div className=\"form-group\">\n                                    <label htmlFor=\"email\">Email address</label>\n                                    <input type=\"email\" className=\"form-control\" id=\"email\" aria-describedby=\"emailHelp\" placeholder=\"Enter email\" value={email} onChange={(e) => setEmail(e.target.value)} />\n                                    <small id=\"emailHelp\" className=\"form-text text-muted\">We'll never share your email with anyone else.</small>\n                                </div>\n                                <button type=\"button\" className=\"btn btn-primary\" onClick={(e) => {\n                                    e.preventDefault();\n                                    onLogin();\n                                }}>Login</button>\n                            </div>}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}","// MainMenu react component with a list of buttons aligned verically\n// Buttons are \"Create a new image\", \"Upload an image\", and \"My Stuff\"\n// use bootstrap classes\n\nimport React, { FC } from 'react';\nimport { Link } from \"react-router-dom\"\n\nexport const MainMenu: FC = () => {\n    return (\n        <div className=\"container\">\n            {/* Header: Welcome to AIBrush! */}\n            <div className=\"row\">\n                <div className=\"col-12\">\n                    <h1>Welcome to AIBrush!</h1>\n                </div>\n            </div>\n            {/* 50px vertical spacer */}\n            <div className=\"row\">\n                <div className=\"col-12\">\n                    <div className=\"spacer\" />\n                </div>\n            </div>\n            <div className=\"row\">\n                <div className=\"col-sm-12\">\n                    <div className=\"btn-group-vertical\">\n                        <Link to=\"/create-image\" className=\"btn btn-primary\">\n                            {/* font awesome image icon */}\n                            <i className=\"fas fa-image\" />&nbsp;\n                            Create a new image\n                        </Link>\n                        <Link to=\"/images\" className=\"btn btn-primary\">\n                            {/* my items */}\n                            <i className=\"fas fa-folder-open\" />&nbsp;\n                            My Images\n                        </Link>\n                        <Link to=\"/designer\" className=\"btn btn-primary\">\n                            {/* font awesome pencil icon */}\n                            <i className=\"fas fa-pencil-alt\" />&nbsp;\n                            Interactive Designer\n                        </Link>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}","// Image Thumnail Component\nimport React, { FC, useEffect } from \"react\";\nimport { Image, ImageStatusEnum } from \"../client/api\";\nimport { imageStatusToIconClass } from \"../lib/iconhelper\";\n\ninterface ImageThumbnailProps {\n    apiUrl: string;\n    image: Image;\n    onClick: (image: Image) => void;\n    onDelete?: (image: Image) => void;\n    onFork?: (image: Image) => void;\n    onDesign?: (image: Image) => void;\n}\n\nexport const ImageThumbnail: FC<ImageThumbnailProps> = ({ apiUrl, image, onClick, onDelete, onFork, onDesign }) => {\n\n    const src = `${apiUrl}/images/${image.id}/thumbnail.jpg?updated_at=${image.updated_at}`;\n\n    useEffect(() => {\n        const img = document.getElementById(`image-${image.id}`) as HTMLImageElement;\n        img.onerror = () => {\n            img.src = \"/images/default.jpg\";\n        }\n    })\n\n    return (\n        <div className=\"card\" style={{ padding: \"10px\", width: \"200px\", margin: \"10px\" }}>\n            <img\n                style={{ cursor: \"pointer\" }}\n                id={`image-${image.id}`}\n                className=\"card-img-top\"\n                src={src}\n                alt={image.label} onClick={() => onClick(image)} />\n            <div className=\"card-body\">\n                <div>\n                    <h5 className=\"card-title\">\n                        {image.label}\n                    </h5>\n                    <p className=\"card-text\">\n                        {/* icon for image status */}\n                        <i className={imageStatusToIconClass(image.status as ImageStatusEnum)}></i>&nbsp;\n                        {image.status}\n                    </p>\n                    {/* if status is \"processing\" then show bootstrap progress bar for image.current_iterations / image.iterations */}\n                    {image.status === \"processing\" && <div className=\"progress\">\n                        <div className=\"progress-bar\" role=\"progressbar\" style={{ width: `${(image.current_iterations * 1.0) / image.iterations * 100}%` }}>\n                        </div>\n                    </div>}\n                </div>\n\n                <hr />\n                {onDelete && <button className=\"btn btn-danger btn-sm\" onClick={() => onDelete && onDelete(image)} style={{marginRight: \"5px\"}}>\n                    <i className=\"fas fa-trash-alt\"></i>\n                </button>}\n                {onFork && (image.status === \"completed\" || image.status === \"saved\") && <button className=\"btn btn-secondary btn-sm\" onClick={() => onFork && onFork(image)} style={{marginRight: \"5px\"}}>\n                    <i className=\"fas fa-code-branch\"></i>\n                </button>}\n                {/*  interactive designer */}\n                {onDesign && <button className=\"btn btn-secondary btn-sm\" onClick={() => onDesign && onDesign(image)} style={{marginRight: \"5px\"}}>\n                    <i className=\"fas fa-pencil-alt\"></i>\n                </button>}\n                {(image.status === \"completed\" || image.status === \"saved\") && image.enable_video && <button className=\"btn btn-secondary btn-sm\" onClick={() => window.open(`${apiUrl}/images/${image.id}/video.mp4`)} style={{marginRight: \"5px\", marginTop: \"5px\"}}>\n                    <i className=\"fas fa-video\"></i>\n                </button>}\n            </div>\n        </div>\n    );\n}","import React, { FC, useEffect, useRef } from \"react\";\nimport { Modal } from \"react-bootstrap\";\nimport { Image } from \"../client/api\";\n\ninterface ImagePopupProps {\n    apiUrl: string;\n    image: Image;\n    onClose: () => void;\n    onDelete?: (image: Image) => void;\n    onFork?: (image: Image) => void;\n    onDesign?: (image: Image) => void;\n}\n\nexport const ImagePopup: FC<ImagePopupProps> = ({ apiUrl, image, onClose, onDelete, onDesign, onFork }) => {\n\n    const img = useRef<HTMLImageElement>(null);\n    const src = `${apiUrl}/images/${image.id}/image.jpg?updated_at=${image.updated_at}`;\n\n    useEffect(() => {\n        if (!img.current) {\n            return;\n        }\n        img.current.onerror = () => {\n            if (!img.current) {\n                return;\n            }\n            img.current.src = \"/images/default.jpg\"\n        }\n    }, [img])\n\n    // if open, show modal with image\n    return (\n        <Modal show={true} onHide={onClose} size=\"lg\">\n            <Modal.Header closeButton>\n                <Modal.Title>{image.label}</Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n                <img ref={img} style={{ width: \"100%\" }} id={`image-popup-${image.id}`} src={src} alt={image.label} />\n                {/* List these fields: status, iterations, phrases */}\n                <div className=\"row\">\n                    <div className=\"col-lg-12\">\n                        <p>Status: {image.status}</p>\n                        <p>Iterations: {image.iterations}</p>\n                        <p>Phrases: {image.phrases.join(\", \")}</p>\n                        {/* enable_video */}\n                        <p>Enable Video: {image.enable_video ? \"Yes\" : \"No\"}</p>\n                    </div>\n                </div>\n                {/* controls */}\n                <div className=\"row\">\n                    <div className=\"col-lg-12\">\n                        {onDelete && <button className=\"btn btn-danger btn-sm\" onClick={() => onDelete && onDelete(image)} style={{ marginRight: \"5px\" }}>\n                            <i className=\"fas fa-trash-alt\"></i>\n                        </button>}\n                        {onFork && image.status === \"saved\" && <button className=\"btn btn-secondary btn-sm\" onClick={() => onFork && onFork(image)} style={{ marginRight: \"5px\" }}>\n                            <i className=\"fas fa-code-branch\"></i>\n                        </button>}\n                        {/*  interactive designer */}\n                        {onDesign && <button className=\"btn btn-secondary btn-sm\" onClick={() => onDesign && onDesign(image)} style={{ marginRight: \"5px\" }}>\n                            <i className=\"fas fa-pencil-alt\"></i>\n                        </button>}\n                        {(image.status === \"completed\" || image.status === \"saved\") && image.enable_video && <button className=\"btn btn-secondary btn-sm\" onClick={() => window.open(`${apiUrl}/images/${image.id}/video.mp4`)} style={{ marginRight: \"5px\", marginTop: \"5px\" }}>\n                            <i className=\"fas fa-video\"></i>\n                        </button>}\n                    </div>\n                </div>\n            </Modal.Body>\n        </Modal>\n    );\n\n}","import React, { FC } from \"react\";\r\n\r\ninterface LoadMoreImagesProps {\r\n    onLoadMore: () => void;\r\n    isLoading: boolean;\r\n}\r\n\r\nexport const LoadMoreImages: FC<LoadMoreImagesProps> = ({ onLoadMore, isLoading }) => {\r\n    return (\r\n        <div className=\"card\" style={{ padding: \"10px\", width: \"200px\", margin: \"10px\" }}>\r\n            <div className=\"card-body\">\r\n                <button disabled={isLoading} className=\"btn btn-primary\" onClick={onLoadMore}>\r\n                    {isLoading ? (\r\n                        <>\r\n                            <i className=\"fa fa-spinner fa-spin\" /> Loading...\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            <i className=\"fa fa-plus\" /> Load more\r\n                        </>\r\n                    )}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    )\r\n};","// React page to show all images\r\n// use bootstrap\r\nimport React, { FC, useState, useEffect } from 'react';\r\nimport moment from \"moment\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { ImageThumbnail } from \"../components/ImageThumbnail\";\r\nimport { AIBrushApi, Image } from \"../client/api\";\r\nimport { ImagePopup } from \"../components/ImagePopup\";\r\nimport { setDesignerCurrentImageId } from \"../lib/designer\";\r\nimport { LoadMoreImages } from \"../components/LoadMoreImages\";\r\n\r\ninterface Props {\r\n    api: AIBrushApi;\r\n    apiUrl: string;\r\n}\r\n\r\nexport const ImagesPage: FC<Props> = ({ api, apiUrl }) => {\r\n    const history = useHistory();\r\n    const [images, setImages] = useState<Array<Image>>([]);\r\n    const [err, setErr] = useState<string | null>(null);\r\n    const [selectedImage, setSelectedImage] = useState<Image | null>(null);\r\n    const [loadingMore, setLoadingMore] = useState<boolean>(false);\r\n\r\n    const onForkImage = async (image: Image) => {\r\n        // navigate to /create-image with ?parent=image.id\r\n        history.push(`/create-image?parent=${image.id}`)\r\n    }\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        if (!api) {\r\n            return\r\n        }\r\n        const loadImages = async () => {\r\n            // clear error\r\n            setErr(null);\r\n            try {\r\n                const cursor = moment().add(1, \"minutes\").valueOf()\r\n                const resp = await api.listImages(cursor, 100, \"desc\")\r\n                if (resp.data.images) {\r\n                    setImages(resp.data.images)\r\n                }\r\n                return 0\r\n            } catch (err) {\r\n                setErr(\"Could not load images\")\r\n                console.error(err)\r\n            }\r\n        };\r\n        loadImages()\r\n    }, [api])\r\n\r\n    useEffect(() => {\r\n        if (!api) {\r\n            return\r\n        }\r\n\r\n        const pollImages = async (images: Array<Image>) => {\r\n            // clear error\r\n            setErr(null);\r\n            // set cursor to max updated_at from images\r\n            const cursor = images.reduce((max, image) => {\r\n                return Math.max(max, image.updated_at)\r\n            }, 0)\r\n\r\n            try {\r\n                const resp = await api.listImages(cursor + 1, 100, \"asc\")\r\n                if (resp.data.images) {\r\n                    // split resp.data.images into \"new\" and \"updated\" lists\r\n                    // image is \"new\" if it's not in images\r\n                    const newImages = resp.data.images.filter(image => {\r\n                        return images.findIndex(i => i.id === image.id) < 0\r\n                    })\r\n                    const updatedImages = resp.data.images.filter(image => {\r\n                        return images.findIndex(i => i.id === image.id) >= 0\r\n                    })\r\n                    setImages([\r\n                        ...images.map(image => {\r\n                            const updatedImage = updatedImages.find(i => i.id === image.id)\r\n                            if (updatedImage) {\r\n                                return updatedImage\r\n                            }\r\n                            return image\r\n                        }),\r\n                        ...newImages\r\n                    ].sort((a, b) => {\r\n                        return b.updated_at - a.updated_at\r\n                    }))\r\n                }\r\n                return images;\r\n            } catch (err) {\r\n                setErr(\"Could not load images\")\r\n                console.error(err)\r\n            }\r\n        }\r\n\r\n        const timerHandle = setInterval(() => {\r\n            pollImages(images)\r\n        }, 5000)\r\n        return () => {\r\n            clearInterval(timerHandle)\r\n        }\r\n\r\n    }, [api, images])\r\n\r\n    const onDeleteImage = async (image: Image) => {\r\n        // clear error\r\n        setErr(\"\")\r\n        // attempt to delete image\r\n        try {\r\n            await api.deleteImage(image.id as string)\r\n            // remove image from list\r\n            setImages(images => images.filter(i => i.id !== image.id));\r\n        } catch (err) {\r\n            console.error(err)\r\n            setErr(\"Could not delete image\")\r\n        }\r\n    }\r\n\r\n    const onDesignImage = async (image: Image) => {\r\n        setDesignerCurrentImageId(image.id)\r\n        history.push(\"/designer\")\r\n    }\r\n\r\n    const onLoadMore = async () => {\r\n        setLoadingMore(true)\r\n        try {\r\n            // get the minimum updated_at from images\r\n            let minUpdatedAt = moment().valueOf();\r\n            images.forEach(image => {\r\n                minUpdatedAt = Math.min(minUpdatedAt, image.updated_at)\r\n            })\r\n            // load images in descending order from updated_at\r\n            const resp = await api.listImages(minUpdatedAt - 1, 100, \"desc\")\r\n            if (resp.data.images) {\r\n                // combine images with new images and sort by updated_at descending\r\n                setImages([\r\n                    ...images,\r\n                    ...resp.data.images\r\n                ].sort((a, b) => {\r\n                    return b.updated_at - a.updated_at\r\n                }))\r\n            }\r\n        } finally {\r\n            setLoadingMore(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-12\">\r\n                    <h1>Images</h1>\r\n                </div>\r\n            </div>\r\n            {/* display error message if one is set */}\r\n            {err && <div className=\"row\">\r\n                <div className=\"col-12\">\r\n                    <div className=\"alert alert-danger\" role=\"alert\">\r\n                        {err}\r\n                    </div>\r\n                </div>\r\n            </div>}\r\n            {/* Link to navigate to CreateImage */}\r\n            <div className=\"row\">\r\n                <div className=\"col-12\">\r\n                    <Link to=\"/create-image\" className=\"btn btn-primary\">\r\n                        <i className=\"fas fa-plus\"></i>&nbsp;\r\n                        Create Image\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n            <hr />\r\n            <div className=\"row\">\r\n                <div className=\"col-md-12\">\r\n                    <div className=\"row\">\r\n                        {images.map(image => (\r\n                            <ImageThumbnail\r\n                                onDelete={onDeleteImage}\r\n                                onFork={onForkImage}\r\n                                onClick={setSelectedImage}\r\n                                onDesign={onDesignImage}\r\n                                apiUrl={apiUrl}\r\n                                key={image.id}\r\n                                image={image} />\r\n                        ))}\r\n                        <LoadMoreImages isLoading={loadingMore} onLoadMore={onLoadMore} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {/* show ImagePopup if selectedImage is set */}\r\n            {selectedImage && (\r\n                <ImagePopup\r\n                    apiUrl={apiUrl}\r\n                    image={selectedImage as Image}\r\n                    onClose={() => setSelectedImage(null)}\r\n                    onDelete={onDeleteImage}\r\n                    onFork={onForkImage}\r\n                    onDesign={onDesignImage}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\n","// Given a set of credentials, this component will refresh them\n// every 5 minutes and invoke the onCredentialsRefreshed callback\n\nimport React, { useEffect, FC } from \"react\"\nimport { LoginResult, AIBrushApi } from \"../client/api\";\n\ninterface TokenRefresherProps {\n    onCredentialsRefreshed: (loginResult: LoginResult) => void;\n    api: AIBrushApi;\n    credentials: LoginResult;\n}\n\nexport const TokenRefresher : FC<TokenRefresherProps> = ({ onCredentialsRefreshed, api, credentials }) => {\n    useEffect(() => {\n        const interval = setInterval(() => {\n            if (credentials && credentials.refreshToken) {\n                api.refresh({refreshToken: credentials.refreshToken}).then(loginResult => {\n                    onCredentialsRefreshed(loginResult.data);\n                });\n            }\n\n        }, 5 * 60 * 1000);\n        return () => {\n            clearInterval(interval);\n        };\n    }, [credentials, api, onCredentialsRefreshed]);\n    return <div></div>;\n}","import React, { FC, useEffect, useState } from 'react';\r\nimport { AIBrushApi } from \"../client/api\";\r\n\r\ninterface HealthcheckerProps {\r\n    api: AIBrushApi;\r\n}\r\n\r\nexport const Healthchecker: FC<HealthcheckerProps> = ({ api }) => {\r\n    // automatically check health every 5 seconds\r\n    const [healthCheck, setHealthCheck] = useState(true);\r\n    \r\n    useEffect(() => {\r\n        const interval = setInterval(() => {\r\n            api.healthcheck().then(() => setHealthCheck(true)).catch(() => setHealthCheck(false));\r\n        }, 5000);\r\n\r\n        return () => clearInterval(interval);\r\n    }, [api]);\r\n\r\n    // only display bootstrap danger alert if healthcheck failed\r\n    // \"service is unavailable\"\r\n    return (\r\n        <div className=\"alert alert-danger\" role=\"alert\" style={{ display: healthCheck ? 'none' : 'block' }}>\r\n            <strong>Service is unavailable</strong>\r\n        </div>\r\n    );\r\n}\r\n\r\n","import React, { useState, useEffect } from 'react';\nimport * as axios from \"axios\";\nimport { BrowserRouter, Switch, Route, Link } from \"react-router-dom\"\nimport './App.css';\nimport \"./bootstrap.min.css\";\nimport { AIBrushApi, LoginResult } from \"./client/api\";\nimport { getConfig } from './config';\nimport { Login } from \"./pages/Login\"\nimport { MainMenu } from './pages/MainMenu';\nimport { CreateImage } from \"./pages/CreateImage\"\nimport { ImagesPage } from \"./pages/Images\";\nimport { TokenRefresher } from \"./components/TokenRefresher\";\nimport { Healthchecker } from './components/Healthchecker';\nimport { InteractiveDesigner } from \"./pages/InteractiveDesigner\";\n\nconst config = getConfig()\nconst httpClient = axios.default;\nconst client = new AIBrushApi(undefined, localStorage.getItem(\"apiUrl\") || config.apiUrl, httpClient);\n\nfunction updateHttpClient(loginResult: LoginResult) {\n  if (loginResult.accessToken) {\n    httpClient.defaults.headers.common['Authorization'] = `Bearer ${loginResult.accessToken}`;\n  }\n}\n\nfunction App() {\n\n  const [credentials, setCredentials] = useState<LoginResult | null>(null);\n\n  const init = async () => {\n    console.log(\"App.init\")\n    const storedCredentials = localStorage.getItem(\"credentials\");\n    if (storedCredentials) {\n      // attempt to refresh token\n      try {\n        const credentials = JSON.parse(storedCredentials) as LoginResult;\n        const result = await client.refresh({\n          refreshToken: credentials.refreshToken\n        });\n        setCredentials(result.data);\n        // save to storage\n        localStorage.setItem(\"credentials\", JSON.stringify(result.data));\n        updateHttpClient(result.data);\n      } catch (e) {\n        console.log(e);\n      }\n    }\n  };\n\n  const onLogin = async (credentials: LoginResult) => {\n    localStorage.setItem(\"credentials\", JSON.stringify(credentials));\n    setCredentials(credentials);\n    updateHttpClient(credentials);\n  };\n\n  const onUpdateAPIUrl = () => {\n    let apiUrl = localStorage.getItem(\"apiUrl\") || config.apiUrl;\n    const resp = prompt(\"Configure backend url\", apiUrl)\n    if (resp) {\n      apiUrl = resp;\n      localStorage.setItem(\"apiUrl\", apiUrl);\n      // reload page\n      window.location.reload();\n    }\n  }\n\n  useEffect(() => {\n    init();\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <TokenRefresher api={client} credentials={credentials as LoginResult} onCredentialsRefreshed={onLogin} />\n      <Healthchecker api={client} />\n      {/* settings button */}\n      <button className=\"btn btn-primary top-button\" onClick={onUpdateAPIUrl}>\n        {/* font awesome settings icon */}\n        <i className=\"fas fa-cog\"></i>&nbsp;\n        Settings\n      </button>\n      <BrowserRouter>\n        {/* if credentials are not set, show Login component */}\n        {!credentials && <Login httpClient={httpClient} client={client} onLogin={onLogin} />}\n        {/* if credentials are set, show a bootstrap logout button a the far top right corner div */}\n        {credentials && <>\n          <button className=\"btn btn-primary top-button\" onClick={() => setCredentials(null)}>\n            {/* font awesome logout icon */}\n            <i className=\"fas fa-sign-out-alt\"></i>&nbsp;\n            Logout\n          </button>\n          {/* home button */}\n          <Link className=\"btn btn-primary top-button\" to=\"/\">\n            {/* font awesome home icon */}\n            <i className=\"fas fa-home\"></i>&nbsp;\n            Home\n          </Link>\n\n        </>}\n        {/* if credentials are set, show the rest of the app */}\n        {credentials && <Switch>\n          <Route path=\"/\" exact={true}>\n            <MainMenu />\n          </Route>\n          <Route path=\"/create-image\">\n            <CreateImage api={client} apiUrl={config.apiUrl} />\n          </Route>\n          <Route path=\"/images\">\n            <ImagesPage apiUrl={config.apiUrl} api={client} />\n          </Route>\n          {/* /designer route */}\n          <Route path=\"/designer\">\n            <InteractiveDesigner api={client} apiUrl={config.apiUrl} />\n          </Route>\n        </Switch>}\n      </BrowserRouter>\n    </div>\n  );\n}\n\nexport default App;\n","export interface Config {\n    apiUrl: string;\n}\n\nexport function getConfig(): Config {\n    if (process.env.REACT_APP_ENV === \"prod\") {\n        return {\n            apiUrl: \"https://aibrush.ngrok.io\"\n        };\n    } else {\n        return {\n            apiUrl: \"http://localhost:3000\"\n        };\n    }\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","/* tslint:disable */\n/* eslint-disable */\n/**\n * AIBrush API\n * Orchestration backend for AI Brush\n *\n * The version of the OpenAPI document: 1.0.0\n * Contact: wolfgangmeyers@gmail.com\n *\n * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).\n * https://openapi-generator.tech\n * Do not edit the class manually.\n */\n\n\nimport { Configuration } from './configuration';\nimport globalAxios, { AxiosPromise, AxiosInstance } from 'axios';\n// Some imports not used depending on template conditions\n// @ts-ignore\nimport { DUMMY_BASE_URL, assertParamExists, setApiKeyToObject, setBasicAuthToObject, setBearerAuthToObject, setOAuthToObject, setSearchParams, serializeDataIfNeeded, toPathString, createRequestFunction } from './common';\n// @ts-ignore\nimport { BASE_PATH, COLLECTION_FORMATS, RequestArgs, BaseAPI, RequiredError } from './base';\n\n/**\n * \n * @export\n * @interface CreateImageInput\n */\nexport interface CreateImageInput {\n    /**\n     * \n     * @type {Array<string>}\n     * @memberof CreateImageInput\n     */\n    phrases?: Array<string>;\n    /**\n     * \n     * @type {string}\n     * @memberof CreateImageInput\n     */\n    label?: string;\n    /**\n     * \n     * @type {number}\n     * @memberof CreateImageInput\n     */\n    iterations?: number;\n    /**\n     * \n     * @type {string}\n     * @memberof CreateImageInput\n     */\n    parent?: string;\n    /**\n     * \n     * @type {string}\n     * @memberof CreateImageInput\n     */\n    encoded_image?: string;\n    /**\n     * \n     * @type {boolean}\n     * @memberof CreateImageInput\n     */\n    enable_video?: boolean;\n}\n/**\n * \n * @export\n * @interface Healthcheck\n */\nexport interface Healthcheck {\n    /**\n     * \n     * @type {string}\n     * @memberof Healthcheck\n     */\n    status?: HealthcheckStatusEnum;\n}\n\n/**\n    * @export\n    * @enum {string}\n    */\nexport enum HealthcheckStatusEnum {\n    Ok = 'ok'\n}\n\n/**\n * \n * @export\n * @interface Image\n */\nexport interface Image {\n    /**\n     * \n     * @type {string}\n     * @memberof Image\n     */\n    id: string;\n    /**\n     * \n     * @type {number}\n     * @memberof Image\n     */\n    created_at: number;\n    /**\n     * \n     * @type {string}\n     * @memberof Image\n     */\n    created_by: string;\n    /**\n     * \n     * @type {number}\n     * @memberof Image\n     */\n    updated_at: number;\n    /**\n     * \n     * @type {Array<string>}\n     * @memberof Image\n     */\n    phrases: Array<string>;\n    /**\n     * \n     * @type {string}\n     * @memberof Image\n     */\n    label: string;\n    /**\n     * \n     * @type {string}\n     * @memberof Image\n     */\n    parent: string;\n    /**\n     * \n     * @type {number}\n     * @memberof Image\n     */\n    iterations: number;\n    /**\n     * \n     * @type {number}\n     * @memberof Image\n     */\n    current_iterations: number;\n    /**\n     * \n     * @type {number}\n     * @memberof Image\n     */\n    score: number;\n    /**\n     * \n     * @type {string}\n     * @memberof Image\n     */\n    status: ImageStatusEnum;\n    /**\n     * \n     * @type {boolean}\n     * @memberof Image\n     */\n    enable_video: boolean;\n}\n\n/**\n    * @export\n    * @enum {string}\n    */\nexport enum ImageStatusEnum {\n    Pending = 'pending',\n    Processing = 'processing',\n    Completed = 'completed',\n    Saved = 'saved'\n}\n\n/**\n * \n * @export\n * @interface ImageList\n */\nexport interface ImageList {\n    /**\n     * \n     * @type {Array<Image>}\n     * @memberof ImageList\n     */\n    images?: Array<Image>;\n}\n/**\n * \n * @export\n * @interface LoginInput\n */\nexport interface LoginInput {\n    /**\n     * \n     * @type {string}\n     * @memberof LoginInput\n     */\n    email?: string;\n}\n/**\n * \n * @export\n * @interface LoginResult\n */\nexport interface LoginResult {\n    /**\n     * \n     * @type {string}\n     * @memberof LoginResult\n     */\n    accessToken?: string;\n    /**\n     * \n     * @type {string}\n     * @memberof LoginResult\n     */\n    refreshToken?: string;\n}\n/**\n * \n * @export\n * @interface RefreshLoginInput\n */\nexport interface RefreshLoginInput {\n    /**\n     * \n     * @type {string}\n     * @memberof RefreshLoginInput\n     */\n    refreshToken?: string;\n}\n/**\n * \n * @export\n * @interface UpdateImageInput\n */\nexport interface UpdateImageInput {\n    /**\n     * \n     * @type {string}\n     * @memberof UpdateImageInput\n     */\n    label?: string;\n    /**\n     * \n     * @type {number}\n     * @memberof UpdateImageInput\n     */\n    current_iterations?: number;\n    /**\n     * \n     * @type {Array<string>}\n     * @memberof UpdateImageInput\n     */\n    phrases?: Array<string>;\n    /**\n     * \n     * @type {string}\n     * @memberof UpdateImageInput\n     */\n    status?: UpdateImageInputStatusEnum;\n    /**\n     * \n     * @type {string}\n     * @memberof UpdateImageInput\n     */\n    encoded_image?: string;\n}\n\n/**\n    * @export\n    * @enum {string}\n    */\nexport enum UpdateImageInputStatusEnum {\n    Pending = 'pending',\n    Processing = 'processing',\n    Completed = 'completed',\n    Saved = 'saved'\n}\n\n/**\n * \n * @export\n * @interface VerifyLoginInput\n */\nexport interface VerifyLoginInput {\n    /**\n     * \n     * @type {string}\n     * @memberof VerifyLoginInput\n     */\n    email?: string;\n    /**\n     * \n     * @type {string}\n     * @memberof VerifyLoginInput\n     */\n    code?: string;\n}\n\n/**\n * AIBrushApi - axios parameter creator\n * @export\n */\nexport const AIBrushApiAxiosParamCreator = function (configuration?: Configuration) {\n    return {\n        /**\n         * Create a new image\n         * @param {CreateImageInput} [createImageInput] \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        createImage: async (createImageInput?: CreateImageInput, options: any = {}): Promise<RequestArgs> => {\n            const localVarPath = `/images`;\n            // use dummy base URL string because the URL constructor only accepts absolute URLs.\n            const localVarUrlObj = new URL(localVarPath, DUMMY_BASE_URL);\n            let baseOptions;\n            if (configuration) {\n                baseOptions = configuration.baseOptions;\n            }\n\n            const localVarRequestOptions = { method: 'POST', ...baseOptions, ...options};\n            const localVarHeaderParameter = {} as any;\n            const localVarQueryParameter = {} as any;\n\n\n    \n            localVarHeaderParameter['Content-Type'] = 'application/json';\n\n            setSearchParams(localVarUrlObj, localVarQueryParameter, options.query);\n            let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};\n            localVarRequestOptions.headers = {...localVarHeaderParameter, ...headersFromBaseOptions, ...options.headers};\n            localVarRequestOptions.data = serializeDataIfNeeded(createImageInput, localVarRequestOptions, configuration)\n\n            return {\n                url: toPathString(localVarUrlObj),\n                options: localVarRequestOptions,\n            };\n        },\n        /**\n         * Delete a saved image\n         * @param {string} id \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        deleteImage: async (id: string, options: any = {}): Promise<RequestArgs> => {\n            // verify required parameter 'id' is not null or undefined\n            assertParamExists('deleteImage', 'id', id)\n            const localVarPath = `/images/{id}`\n                .replace(`{${\"id\"}}`, encodeURIComponent(String(id)));\n            // use dummy base URL string because the URL constructor only accepts absolute URLs.\n            const localVarUrlObj = new URL(localVarPath, DUMMY_BASE_URL);\n            let baseOptions;\n            if (configuration) {\n                baseOptions = configuration.baseOptions;\n            }\n\n            const localVarRequestOptions = { method: 'DELETE', ...baseOptions, ...options};\n            const localVarHeaderParameter = {} as any;\n            const localVarQueryParameter = {} as any;\n\n\n    \n            setSearchParams(localVarUrlObj, localVarQueryParameter, options.query);\n            let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};\n            localVarRequestOptions.headers = {...localVarHeaderParameter, ...headersFromBaseOptions, ...options.headers};\n\n            return {\n                url: toPathString(localVarUrlObj),\n                options: localVarRequestOptions,\n            };\n        },\n        /**\n         * Get a saved image by id\n         * @param {string} id \n         * @param {'thumbnail' | 'image'} [download] \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        getImage: async (id: string, download?: 'thumbnail' | 'image', options: any = {}): Promise<RequestArgs> => {\n            // verify required parameter 'id' is not null or undefined\n            assertParamExists('getImage', 'id', id)\n            const localVarPath = `/images/{id}`\n                .replace(`{${\"id\"}}`, encodeURIComponent(String(id)));\n            // use dummy base URL string because the URL constructor only accepts absolute URLs.\n            const localVarUrlObj = new URL(localVarPath, DUMMY_BASE_URL);\n            let baseOptions;\n            if (configuration) {\n                baseOptions = configuration.baseOptions;\n            }\n\n            const localVarRequestOptions = { method: 'GET', ...baseOptions, ...options};\n            const localVarHeaderParameter = {} as any;\n            const localVarQueryParameter = {} as any;\n\n            if (download !== undefined) {\n                localVarQueryParameter['download'] = download;\n            }\n\n\n    \n            setSearchParams(localVarUrlObj, localVarQueryParameter, options.query);\n            let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};\n            localVarRequestOptions.headers = {...localVarHeaderParameter, ...headersFromBaseOptions, ...options.headers};\n\n            return {\n                url: toPathString(localVarUrlObj),\n                options: localVarRequestOptions,\n            };\n        },\n        /**\n         * Get the binary image data\n         * @param {string} id \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        getImageData: async (id: string, options: any = {}): Promise<RequestArgs> => {\n            // verify required parameter 'id' is not null or undefined\n            assertParamExists('getImageData', 'id', id)\n            const localVarPath = `/images/{id}/image.jpg`\n                .replace(`{${\"id\"}}`, encodeURIComponent(String(id)));\n            // use dummy base URL string because the URL constructor only accepts absolute URLs.\n            const localVarUrlObj = new URL(localVarPath, DUMMY_BASE_URL);\n            let baseOptions;\n            if (configuration) {\n                baseOptions = configuration.baseOptions;\n            }\n\n            const localVarRequestOptions = { method: 'GET', ...baseOptions, ...options};\n            const localVarHeaderParameter = {} as any;\n            const localVarQueryParameter = {} as any;\n\n\n    \n            setSearchParams(localVarUrlObj, localVarQueryParameter, options.query);\n            let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};\n            localVarRequestOptions.headers = {...localVarHeaderParameter, ...headersFromBaseOptions, ...options.headers};\n\n            return {\n                url: toPathString(localVarUrlObj),\n                options: localVarRequestOptions,\n            };\n        },\n        /**\n         * Get the binary thumbnail data\n         * @param {string} id \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        getThumbnailData: async (id: string, options: any = {}): Promise<RequestArgs> => {\n            // verify required parameter 'id' is not null or undefined\n            assertParamExists('getThumbnailData', 'id', id)\n            const localVarPath = `/images/{id}/thumbnail.jpg`\n                .replace(`{${\"id\"}}`, encodeURIComponent(String(id)));\n            // use dummy base URL string because the URL constructor only accepts absolute URLs.\n            const localVarUrlObj = new URL(localVarPath, DUMMY_BASE_URL);\n            let baseOptions;\n            if (configuration) {\n                baseOptions = configuration.baseOptions;\n            }\n\n            const localVarRequestOptions = { method: 'GET', ...baseOptions, ...options};\n            const localVarHeaderParameter = {} as any;\n            const localVarQueryParameter = {} as any;\n\n\n    \n            setSearchParams(localVarUrlObj, localVarQueryParameter, options.query);\n            let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};\n            localVarRequestOptions.headers = {...localVarHeaderParameter, ...headersFromBaseOptions, ...options.headers};\n\n            return {\n                url: toPathString(localVarUrlObj),\n                options: localVarRequestOptions,\n            };\n        },\n        /**\n         * Get the binary video data\n         * @param {string} id \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        getVideoData: async (id: string, options: any = {}): Promise<RequestArgs> => {\n            // verify required parameter 'id' is not null or undefined\n            assertParamExists('getVideoData', 'id', id)\n            const localVarPath = `/images/{id}/video.mp4`\n                .replace(`{${\"id\"}}`, encodeURIComponent(String(id)));\n            // use dummy base URL string because the URL constructor only accepts absolute URLs.\n            const localVarUrlObj = new URL(localVarPath, DUMMY_BASE_URL);\n            let baseOptions;\n            if (configuration) {\n                baseOptions = configuration.baseOptions;\n            }\n\n            const localVarRequestOptions = { method: 'GET', ...baseOptions, ...options};\n            const localVarHeaderParameter = {} as any;\n            const localVarQueryParameter = {} as any;\n\n\n    \n            setSearchParams(localVarUrlObj, localVarQueryParameter, options.query);\n            let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};\n            localVarRequestOptions.headers = {...localVarHeaderParameter, ...headersFromBaseOptions, ...options.headers};\n\n            return {\n                url: toPathString(localVarUrlObj),\n                options: localVarRequestOptions,\n            };\n        },\n        /**\n         * Healthcheck\n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        healthcheck: async (options: any = {}): Promise<RequestArgs> => {\n            const localVarPath = `/healthcheck`;\n            // use dummy base URL string because the URL constructor only accepts absolute URLs.\n            const localVarUrlObj = new URL(localVarPath, DUMMY_BASE_URL);\n            let baseOptions;\n            if (configuration) {\n                baseOptions = configuration.baseOptions;\n            }\n\n            const localVarRequestOptions = { method: 'GET', ...baseOptions, ...options};\n            const localVarHeaderParameter = {} as any;\n            const localVarQueryParameter = {} as any;\n\n\n    \n            setSearchParams(localVarUrlObj, localVarQueryParameter, options.query);\n            let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};\n            localVarRequestOptions.headers = {...localVarHeaderParameter, ...headersFromBaseOptions, ...options.headers};\n\n            return {\n                url: toPathString(localVarUrlObj),\n                options: localVarRequestOptions,\n            };\n        },\n        /**\n         * Get a list of saved images\n         * @param {number} [cursor] \n         * @param {number} [limit] \n         * @param {'asc' | 'desc'} [direction] \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        listImages: async (cursor?: number, limit?: number, direction?: 'asc' | 'desc', options: any = {}): Promise<RequestArgs> => {\n            const localVarPath = `/images`;\n            // use dummy base URL string because the URL constructor only accepts absolute URLs.\n            const localVarUrlObj = new URL(localVarPath, DUMMY_BASE_URL);\n            let baseOptions;\n            if (configuration) {\n                baseOptions = configuration.baseOptions;\n            }\n\n            const localVarRequestOptions = { method: 'GET', ...baseOptions, ...options};\n            const localVarHeaderParameter = {} as any;\n            const localVarQueryParameter = {} as any;\n\n            if (cursor !== undefined) {\n                localVarQueryParameter['cursor'] = cursor;\n            }\n\n            if (limit !== undefined) {\n                localVarQueryParameter['limit'] = limit;\n            }\n\n            if (direction !== undefined) {\n                localVarQueryParameter['direction'] = direction;\n            }\n\n\n    \n            setSearchParams(localVarUrlObj, localVarQueryParameter, options.query);\n            let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};\n            localVarRequestOptions.headers = {...localVarHeaderParameter, ...headersFromBaseOptions, ...options.headers};\n\n            return {\n                url: toPathString(localVarUrlObj),\n                options: localVarRequestOptions,\n            };\n        },\n        /**\n         * Login by email\n         * @param {LoginInput} [loginInput] \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        login: async (loginInput?: LoginInput, options: any = {}): Promise<RequestArgs> => {\n            const localVarPath = `/auth/login`;\n            // use dummy base URL string because the URL constructor only accepts absolute URLs.\n            const localVarUrlObj = new URL(localVarPath, DUMMY_BASE_URL);\n            let baseOptions;\n            if (configuration) {\n                baseOptions = configuration.baseOptions;\n            }\n\n            const localVarRequestOptions = { method: 'POST', ...baseOptions, ...options};\n            const localVarHeaderParameter = {} as any;\n            const localVarQueryParameter = {} as any;\n\n\n    \n            localVarHeaderParameter['Content-Type'] = 'application/json';\n\n            setSearchParams(localVarUrlObj, localVarQueryParameter, options.query);\n            let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};\n            localVarRequestOptions.headers = {...localVarHeaderParameter, ...headersFromBaseOptions, ...options.headers};\n            localVarRequestOptions.data = serializeDataIfNeeded(loginInput, localVarRequestOptions, configuration)\n\n            return {\n                url: toPathString(localVarUrlObj),\n                options: localVarRequestOptions,\n            };\n        },\n        /**\n         * Get the next pending image and set its status to processing.\n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        processImage: async (options: any = {}): Promise<RequestArgs> => {\n            const localVarPath = `/process-image`;\n            // use dummy base URL string because the URL constructor only accepts absolute URLs.\n            const localVarUrlObj = new URL(localVarPath, DUMMY_BASE_URL);\n            let baseOptions;\n            if (configuration) {\n                baseOptions = configuration.baseOptions;\n            }\n\n            const localVarRequestOptions = { method: 'PUT', ...baseOptions, ...options};\n            const localVarHeaderParameter = {} as any;\n            const localVarQueryParameter = {} as any;\n\n\n    \n            setSearchParams(localVarUrlObj, localVarQueryParameter, options.query);\n            let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};\n            localVarRequestOptions.headers = {...localVarHeaderParameter, ...headersFromBaseOptions, ...options.headers};\n\n            return {\n                url: toPathString(localVarUrlObj),\n                options: localVarRequestOptions,\n            };\n        },\n        /**\n         * Refresh Login code\n         * @param {RefreshLoginInput} [refreshLoginInput] \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        refresh: async (refreshLoginInput?: RefreshLoginInput, options: any = {}): Promise<RequestArgs> => {\n            const localVarPath = `/auth/refresh`;\n            // use dummy base URL string because the URL constructor only accepts absolute URLs.\n            const localVarUrlObj = new URL(localVarPath, DUMMY_BASE_URL);\n            let baseOptions;\n            if (configuration) {\n                baseOptions = configuration.baseOptions;\n            }\n\n            const localVarRequestOptions = { method: 'POST', ...baseOptions, ...options};\n            const localVarHeaderParameter = {} as any;\n            const localVarQueryParameter = {} as any;\n\n\n    \n            localVarHeaderParameter['Content-Type'] = 'application/json';\n\n            setSearchParams(localVarUrlObj, localVarQueryParameter, options.query);\n            let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};\n            localVarRequestOptions.headers = {...localVarHeaderParameter, ...headersFromBaseOptions, ...options.headers};\n            localVarRequestOptions.data = serializeDataIfNeeded(refreshLoginInput, localVarRequestOptions, configuration)\n\n            return {\n                url: toPathString(localVarUrlObj),\n                options: localVarRequestOptions,\n            };\n        },\n        /**\n         * Update a saved image\n         * @param {string} id \n         * @param {UpdateImageInput} [updateImageInput] \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        updateImage: async (id: string, updateImageInput?: UpdateImageInput, options: any = {}): Promise<RequestArgs> => {\n            // verify required parameter 'id' is not null or undefined\n            assertParamExists('updateImage', 'id', id)\n            const localVarPath = `/images/{id}`\n                .replace(`{${\"id\"}}`, encodeURIComponent(String(id)));\n            // use dummy base URL string because the URL constructor only accepts absolute URLs.\n            const localVarUrlObj = new URL(localVarPath, DUMMY_BASE_URL);\n            let baseOptions;\n            if (configuration) {\n                baseOptions = configuration.baseOptions;\n            }\n\n            const localVarRequestOptions = { method: 'PATCH', ...baseOptions, ...options};\n            const localVarHeaderParameter = {} as any;\n            const localVarQueryParameter = {} as any;\n\n\n    \n            localVarHeaderParameter['Content-Type'] = 'application/json';\n\n            setSearchParams(localVarUrlObj, localVarQueryParameter, options.query);\n            let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};\n            localVarRequestOptions.headers = {...localVarHeaderParameter, ...headersFromBaseOptions, ...options.headers};\n            localVarRequestOptions.data = serializeDataIfNeeded(updateImageInput, localVarRequestOptions, configuration)\n\n            return {\n                url: toPathString(localVarUrlObj),\n                options: localVarRequestOptions,\n            };\n        },\n        /**\n         * Update the video data\n         * @param {string} id \n         * @param {any} [body] \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        updateVideoData: async (id: string, body?: any, options: any = {}): Promise<RequestArgs> => {\n            // verify required parameter 'id' is not null or undefined\n            assertParamExists('updateVideoData', 'id', id)\n            const localVarPath = `/images/{id}/video.mp4`\n                .replace(`{${\"id\"}}`, encodeURIComponent(String(id)));\n            // use dummy base URL string because the URL constructor only accepts absolute URLs.\n            const localVarUrlObj = new URL(localVarPath, DUMMY_BASE_URL);\n            let baseOptions;\n            if (configuration) {\n                baseOptions = configuration.baseOptions;\n            }\n\n            const localVarRequestOptions = { method: 'PUT', ...baseOptions, ...options};\n            const localVarHeaderParameter = {} as any;\n            const localVarQueryParameter = {} as any;\n\n\n    \n            localVarHeaderParameter['Content-Type'] = 'video/mp4';\n\n            setSearchParams(localVarUrlObj, localVarQueryParameter, options.query);\n            let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};\n            localVarRequestOptions.headers = {...localVarHeaderParameter, ...headersFromBaseOptions, ...options.headers};\n            localVarRequestOptions.data = serializeDataIfNeeded(body, localVarRequestOptions, configuration)\n\n            return {\n                url: toPathString(localVarUrlObj),\n                options: localVarRequestOptions,\n            };\n        },\n        /**\n         * Verify Login code\n         * @param {VerifyLoginInput} [verifyLoginInput] \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        verify: async (verifyLoginInput?: VerifyLoginInput, options: any = {}): Promise<RequestArgs> => {\n            const localVarPath = `/auth/verify`;\n            // use dummy base URL string because the URL constructor only accepts absolute URLs.\n            const localVarUrlObj = new URL(localVarPath, DUMMY_BASE_URL);\n            let baseOptions;\n            if (configuration) {\n                baseOptions = configuration.baseOptions;\n            }\n\n            const localVarRequestOptions = { method: 'POST', ...baseOptions, ...options};\n            const localVarHeaderParameter = {} as any;\n            const localVarQueryParameter = {} as any;\n\n\n    \n            localVarHeaderParameter['Content-Type'] = 'application/json';\n\n            setSearchParams(localVarUrlObj, localVarQueryParameter, options.query);\n            let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};\n            localVarRequestOptions.headers = {...localVarHeaderParameter, ...headersFromBaseOptions, ...options.headers};\n            localVarRequestOptions.data = serializeDataIfNeeded(verifyLoginInput, localVarRequestOptions, configuration)\n\n            return {\n                url: toPathString(localVarUrlObj),\n                options: localVarRequestOptions,\n            };\n        },\n    }\n};\n\n/**\n * AIBrushApi - functional programming interface\n * @export\n */\nexport const AIBrushApiFp = function(configuration?: Configuration) {\n    const localVarAxiosParamCreator = AIBrushApiAxiosParamCreator(configuration)\n    return {\n        /**\n         * Create a new image\n         * @param {CreateImageInput} [createImageInput] \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        async createImage(createImageInput?: CreateImageInput, options?: any): Promise<(axios?: AxiosInstance, basePath?: string) => AxiosPromise<Image>> {\n            const localVarAxiosArgs = await localVarAxiosParamCreator.createImage(createImageInput, options);\n            return createRequestFunction(localVarAxiosArgs, globalAxios, BASE_PATH, configuration);\n        },\n        /**\n         * Delete a saved image\n         * @param {string} id \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        async deleteImage(id: string, options?: any): Promise<(axios?: AxiosInstance, basePath?: string) => AxiosPromise<void>> {\n            const localVarAxiosArgs = await localVarAxiosParamCreator.deleteImage(id, options);\n            return createRequestFunction(localVarAxiosArgs, globalAxios, BASE_PATH, configuration);\n        },\n        /**\n         * Get a saved image by id\n         * @param {string} id \n         * @param {'thumbnail' | 'image'} [download] \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        async getImage(id: string, download?: 'thumbnail' | 'image', options?: any): Promise<(axios?: AxiosInstance, basePath?: string) => AxiosPromise<Image>> {\n            const localVarAxiosArgs = await localVarAxiosParamCreator.getImage(id, download, options);\n            return createRequestFunction(localVarAxiosArgs, globalAxios, BASE_PATH, configuration);\n        },\n        /**\n         * Get the binary image data\n         * @param {string} id \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        async getImageData(id: string, options?: any): Promise<(axios?: AxiosInstance, basePath?: string) => AxiosPromise<any>> {\n            const localVarAxiosArgs = await localVarAxiosParamCreator.getImageData(id, options);\n            return createRequestFunction(localVarAxiosArgs, globalAxios, BASE_PATH, configuration);\n        },\n        /**\n         * Get the binary thumbnail data\n         * @param {string} id \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        async getThumbnailData(id: string, options?: any): Promise<(axios?: AxiosInstance, basePath?: string) => AxiosPromise<any>> {\n            const localVarAxiosArgs = await localVarAxiosParamCreator.getThumbnailData(id, options);\n            return createRequestFunction(localVarAxiosArgs, globalAxios, BASE_PATH, configuration);\n        },\n        /**\n         * Get the binary video data\n         * @param {string} id \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        async getVideoData(id: string, options?: any): Promise<(axios?: AxiosInstance, basePath?: string) => AxiosPromise<any>> {\n            const localVarAxiosArgs = await localVarAxiosParamCreator.getVideoData(id, options);\n            return createRequestFunction(localVarAxiosArgs, globalAxios, BASE_PATH, configuration);\n        },\n        /**\n         * Healthcheck\n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        async healthcheck(options?: any): Promise<(axios?: AxiosInstance, basePath?: string) => AxiosPromise<Healthcheck>> {\n            const localVarAxiosArgs = await localVarAxiosParamCreator.healthcheck(options);\n            return createRequestFunction(localVarAxiosArgs, globalAxios, BASE_PATH, configuration);\n        },\n        /**\n         * Get a list of saved images\n         * @param {number} [cursor] \n         * @param {number} [limit] \n         * @param {'asc' | 'desc'} [direction] \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        async listImages(cursor?: number, limit?: number, direction?: 'asc' | 'desc', options?: any): Promise<(axios?: AxiosInstance, basePath?: string) => AxiosPromise<ImageList>> {\n            const localVarAxiosArgs = await localVarAxiosParamCreator.listImages(cursor, limit, direction, options);\n            return createRequestFunction(localVarAxiosArgs, globalAxios, BASE_PATH, configuration);\n        },\n        /**\n         * Login by email\n         * @param {LoginInput} [loginInput] \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        async login(loginInput?: LoginInput, options?: any): Promise<(axios?: AxiosInstance, basePath?: string) => AxiosPromise<void>> {\n            const localVarAxiosArgs = await localVarAxiosParamCreator.login(loginInput, options);\n            return createRequestFunction(localVarAxiosArgs, globalAxios, BASE_PATH, configuration);\n        },\n        /**\n         * Get the next pending image and set its status to processing.\n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        async processImage(options?: any): Promise<(axios?: AxiosInstance, basePath?: string) => AxiosPromise<Image>> {\n            const localVarAxiosArgs = await localVarAxiosParamCreator.processImage(options);\n            return createRequestFunction(localVarAxiosArgs, globalAxios, BASE_PATH, configuration);\n        },\n        /**\n         * Refresh Login code\n         * @param {RefreshLoginInput} [refreshLoginInput] \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        async refresh(refreshLoginInput?: RefreshLoginInput, options?: any): Promise<(axios?: AxiosInstance, basePath?: string) => AxiosPromise<LoginResult>> {\n            const localVarAxiosArgs = await localVarAxiosParamCreator.refresh(refreshLoginInput, options);\n            return createRequestFunction(localVarAxiosArgs, globalAxios, BASE_PATH, configuration);\n        },\n        /**\n         * Update a saved image\n         * @param {string} id \n         * @param {UpdateImageInput} [updateImageInput] \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        async updateImage(id: string, updateImageInput?: UpdateImageInput, options?: any): Promise<(axios?: AxiosInstance, basePath?: string) => AxiosPromise<Image>> {\n            const localVarAxiosArgs = await localVarAxiosParamCreator.updateImage(id, updateImageInput, options);\n            return createRequestFunction(localVarAxiosArgs, globalAxios, BASE_PATH, configuration);\n        },\n        /**\n         * Update the video data\n         * @param {string} id \n         * @param {any} [body] \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        async updateVideoData(id: string, body?: any, options?: any): Promise<(axios?: AxiosInstance, basePath?: string) => AxiosPromise<void>> {\n            const localVarAxiosArgs = await localVarAxiosParamCreator.updateVideoData(id, body, options);\n            return createRequestFunction(localVarAxiosArgs, globalAxios, BASE_PATH, configuration);\n        },\n        /**\n         * Verify Login code\n         * @param {VerifyLoginInput} [verifyLoginInput] \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        async verify(verifyLoginInput?: VerifyLoginInput, options?: any): Promise<(axios?: AxiosInstance, basePath?: string) => AxiosPromise<LoginResult>> {\n            const localVarAxiosArgs = await localVarAxiosParamCreator.verify(verifyLoginInput, options);\n            return createRequestFunction(localVarAxiosArgs, globalAxios, BASE_PATH, configuration);\n        },\n    }\n};\n\n/**\n * AIBrushApi - factory interface\n * @export\n */\nexport const AIBrushApiFactory = function (configuration?: Configuration, basePath?: string, axios?: AxiosInstance) {\n    const localVarFp = AIBrushApiFp(configuration)\n    return {\n        /**\n         * Create a new image\n         * @param {CreateImageInput} [createImageInput] \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        createImage(createImageInput?: CreateImageInput, options?: any): AxiosPromise<Image> {\n            return localVarFp.createImage(createImageInput, options).then((request) => request(axios, basePath));\n        },\n        /**\n         * Delete a saved image\n         * @param {string} id \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        deleteImage(id: string, options?: any): AxiosPromise<void> {\n            return localVarFp.deleteImage(id, options).then((request) => request(axios, basePath));\n        },\n        /**\n         * Get a saved image by id\n         * @param {string} id \n         * @param {'thumbnail' | 'image'} [download] \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        getImage(id: string, download?: 'thumbnail' | 'image', options?: any): AxiosPromise<Image> {\n            return localVarFp.getImage(id, download, options).then((request) => request(axios, basePath));\n        },\n        /**\n         * Get the binary image data\n         * @param {string} id \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        getImageData(id: string, options?: any): AxiosPromise<any> {\n            return localVarFp.getImageData(id, options).then((request) => request(axios, basePath));\n        },\n        /**\n         * Get the binary thumbnail data\n         * @param {string} id \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        getThumbnailData(id: string, options?: any): AxiosPromise<any> {\n            return localVarFp.getThumbnailData(id, options).then((request) => request(axios, basePath));\n        },\n        /**\n         * Get the binary video data\n         * @param {string} id \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        getVideoData(id: string, options?: any): AxiosPromise<any> {\n            return localVarFp.getVideoData(id, options).then((request) => request(axios, basePath));\n        },\n        /**\n         * Healthcheck\n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        healthcheck(options?: any): AxiosPromise<Healthcheck> {\n            return localVarFp.healthcheck(options).then((request) => request(axios, basePath));\n        },\n        /**\n         * Get a list of saved images\n         * @param {number} [cursor] \n         * @param {number} [limit] \n         * @param {'asc' | 'desc'} [direction] \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        listImages(cursor?: number, limit?: number, direction?: 'asc' | 'desc', options?: any): AxiosPromise<ImageList> {\n            return localVarFp.listImages(cursor, limit, direction, options).then((request) => request(axios, basePath));\n        },\n        /**\n         * Login by email\n         * @param {LoginInput} [loginInput] \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        login(loginInput?: LoginInput, options?: any): AxiosPromise<void> {\n            return localVarFp.login(loginInput, options).then((request) => request(axios, basePath));\n        },\n        /**\n         * Get the next pending image and set its status to processing.\n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        processImage(options?: any): AxiosPromise<Image> {\n            return localVarFp.processImage(options).then((request) => request(axios, basePath));\n        },\n        /**\n         * Refresh Login code\n         * @param {RefreshLoginInput} [refreshLoginInput] \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        refresh(refreshLoginInput?: RefreshLoginInput, options?: any): AxiosPromise<LoginResult> {\n            return localVarFp.refresh(refreshLoginInput, options).then((request) => request(axios, basePath));\n        },\n        /**\n         * Update a saved image\n         * @param {string} id \n         * @param {UpdateImageInput} [updateImageInput] \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        updateImage(id: string, updateImageInput?: UpdateImageInput, options?: any): AxiosPromise<Image> {\n            return localVarFp.updateImage(id, updateImageInput, options).then((request) => request(axios, basePath));\n        },\n        /**\n         * Update the video data\n         * @param {string} id \n         * @param {any} [body] \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        updateVideoData(id: string, body?: any, options?: any): AxiosPromise<void> {\n            return localVarFp.updateVideoData(id, body, options).then((request) => request(axios, basePath));\n        },\n        /**\n         * Verify Login code\n         * @param {VerifyLoginInput} [verifyLoginInput] \n         * @param {*} [options] Override http request option.\n         * @throws {RequiredError}\n         */\n        verify(verifyLoginInput?: VerifyLoginInput, options?: any): AxiosPromise<LoginResult> {\n            return localVarFp.verify(verifyLoginInput, options).then((request) => request(axios, basePath));\n        },\n    };\n};\n\n/**\n * AIBrushApi - object-oriented interface\n * @export\n * @class AIBrushApi\n * @extends {BaseAPI}\n */\nexport class AIBrushApi extends BaseAPI {\n    /**\n     * Create a new image\n     * @param {CreateImageInput} [createImageInput] \n     * @param {*} [options] Override http request option.\n     * @throws {RequiredError}\n     * @memberof AIBrushApi\n     */\n    public createImage(createImageInput?: CreateImageInput, options?: any) {\n        return AIBrushApiFp(this.configuration).createImage(createImageInput, options).then((request) => request(this.axios, this.basePath));\n    }\n\n    /**\n     * Delete a saved image\n     * @param {string} id \n     * @param {*} [options] Override http request option.\n     * @throws {RequiredError}\n     * @memberof AIBrushApi\n     */\n    public deleteImage(id: string, options?: any) {\n        return AIBrushApiFp(this.configuration).deleteImage(id, options).then((request) => request(this.axios, this.basePath));\n    }\n\n    /**\n     * Get a saved image by id\n     * @param {string} id \n     * @param {'thumbnail' | 'image'} [download] \n     * @param {*} [options] Override http request option.\n     * @throws {RequiredError}\n     * @memberof AIBrushApi\n     */\n    public getImage(id: string, download?: 'thumbnail' | 'image', options?: any) {\n        return AIBrushApiFp(this.configuration).getImage(id, download, options).then((request) => request(this.axios, this.basePath));\n    }\n\n    /**\n     * Get the binary image data\n     * @param {string} id \n     * @param {*} [options] Override http request option.\n     * @throws {RequiredError}\n     * @memberof AIBrushApi\n     */\n    public getImageData(id: string, options?: any) {\n        return AIBrushApiFp(this.configuration).getImageData(id, options).then((request) => request(this.axios, this.basePath));\n    }\n\n    /**\n     * Get the binary thumbnail data\n     * @param {string} id \n     * @param {*} [options] Override http request option.\n     * @throws {RequiredError}\n     * @memberof AIBrushApi\n     */\n    public getThumbnailData(id: string, options?: any) {\n        return AIBrushApiFp(this.configuration).getThumbnailData(id, options).then((request) => request(this.axios, this.basePath));\n    }\n\n    /**\n     * Get the binary video data\n     * @param {string} id \n     * @param {*} [options] Override http request option.\n     * @throws {RequiredError}\n     * @memberof AIBrushApi\n     */\n    public getVideoData(id: string, options?: any) {\n        return AIBrushApiFp(this.configuration).getVideoData(id, options).then((request) => request(this.axios, this.basePath));\n    }\n\n    /**\n     * Healthcheck\n     * @param {*} [options] Override http request option.\n     * @throws {RequiredError}\n     * @memberof AIBrushApi\n     */\n    public healthcheck(options?: any) {\n        return AIBrushApiFp(this.configuration).healthcheck(options).then((request) => request(this.axios, this.basePath));\n    }\n\n    /**\n     * Get a list of saved images\n     * @param {number} [cursor] \n     * @param {number} [limit] \n     * @param {'asc' | 'desc'} [direction] \n     * @param {*} [options] Override http request option.\n     * @throws {RequiredError}\n     * @memberof AIBrushApi\n     */\n    public listImages(cursor?: number, limit?: number, direction?: 'asc' | 'desc', options?: any) {\n        return AIBrushApiFp(this.configuration).listImages(cursor, limit, direction, options).then((request) => request(this.axios, this.basePath));\n    }\n\n    /**\n     * Login by email\n     * @param {LoginInput} [loginInput] \n     * @param {*} [options] Override http request option.\n     * @throws {RequiredError}\n     * @memberof AIBrushApi\n     */\n    public login(loginInput?: LoginInput, options?: any) {\n        return AIBrushApiFp(this.configuration).login(loginInput, options).then((request) => request(this.axios, this.basePath));\n    }\n\n    /**\n     * Get the next pending image and set its status to processing.\n     * @param {*} [options] Override http request option.\n     * @throws {RequiredError}\n     * @memberof AIBrushApi\n     */\n    public processImage(options?: any) {\n        return AIBrushApiFp(this.configuration).processImage(options).then((request) => request(this.axios, this.basePath));\n    }\n\n    /**\n     * Refresh Login code\n     * @param {RefreshLoginInput} [refreshLoginInput] \n     * @param {*} [options] Override http request option.\n     * @throws {RequiredError}\n     * @memberof AIBrushApi\n     */\n    public refresh(refreshLoginInput?: RefreshLoginInput, options?: any) {\n        return AIBrushApiFp(this.configuration).refresh(refreshLoginInput, options).then((request) => request(this.axios, this.basePath));\n    }\n\n    /**\n     * Update a saved image\n     * @param {string} id \n     * @param {UpdateImageInput} [updateImageInput] \n     * @param {*} [options] Override http request option.\n     * @throws {RequiredError}\n     * @memberof AIBrushApi\n     */\n    public updateImage(id: string, updateImageInput?: UpdateImageInput, options?: any) {\n        return AIBrushApiFp(this.configuration).updateImage(id, updateImageInput, options).then((request) => request(this.axios, this.basePath));\n    }\n\n    /**\n     * Update the video data\n     * @param {string} id \n     * @param {any} [body] \n     * @param {*} [options] Override http request option.\n     * @throws {RequiredError}\n     * @memberof AIBrushApi\n     */\n    public updateVideoData(id: string, body?: any, options?: any) {\n        return AIBrushApiFp(this.configuration).updateVideoData(id, body, options).then((request) => request(this.axios, this.basePath));\n    }\n\n    /**\n     * Verify Login code\n     * @param {VerifyLoginInput} [verifyLoginInput] \n     * @param {*} [options] Override http request option.\n     * @throws {RequiredError}\n     * @memberof AIBrushApi\n     */\n    public verify(verifyLoginInput?: VerifyLoginInput, options?: any) {\n        return AIBrushApiFp(this.configuration).verify(verifyLoginInput, options).then((request) => request(this.axios, this.basePath));\n    }\n}\n\n\n","/* tslint:disable */\n/* eslint-disable */\n/**\n * AIBrush API\n * Orchestration backend for AI Brush\n *\n * The version of the OpenAPI document: 1.0.0\n * Contact: wolfgangmeyers@gmail.com\n *\n * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).\n * https://openapi-generator.tech\n * Do not edit the class manually.\n */\n\n\nimport { Configuration } from \"./configuration\";\n// Some imports not used depending on template conditions\n// @ts-ignore\nimport globalAxios, { AxiosPromise, AxiosInstance } from 'axios';\n\nexport const BASE_PATH = \"https://aibrush.ngrok.io\".replace(/\\/+$/, \"\");\n\n/**\n *\n * @export\n */\nexport const COLLECTION_FORMATS = {\n    csv: \",\",\n    ssv: \" \",\n    tsv: \"\\t\",\n    pipes: \"|\",\n};\n\n/**\n *\n * @export\n * @interface RequestArgs\n */\nexport interface RequestArgs {\n    url: string;\n    options: any;\n}\n\n/**\n *\n * @export\n * @class BaseAPI\n */\nexport class BaseAPI {\n    protected configuration: Configuration | undefined;\n\n    constructor(configuration?: Configuration, protected basePath: string = BASE_PATH, protected axios: AxiosInstance = globalAxios) {\n        if (configuration) {\n            this.configuration = configuration;\n            this.basePath = configuration.basePath || this.basePath;\n        }\n    }\n};\n\n/**\n *\n * @export\n * @class RequiredError\n * @extends {Error}\n */\nexport class RequiredError extends Error {\n    name: \"RequiredError\" = \"RequiredError\";\n    constructor(public field: string, msg?: string) {\n        super(msg);\n    }\n}\n","/* tslint:disable */\n/* eslint-disable */\n/**\n * AIBrush API\n * Orchestration backend for AI Brush\n *\n * The version of the OpenAPI document: 1.0.0\n * Contact: wolfgangmeyers@gmail.com\n *\n * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).\n * https://openapi-generator.tech\n * Do not edit the class manually.\n */\n\n\nimport { Configuration } from \"./configuration\";\nimport { RequiredError,　RequestArgs } from \"./base\";\nimport { AxiosInstance } from 'axios';\n\n/**\n *\n * @export\n */\nexport const DUMMY_BASE_URL = 'https://example.com'\n\n/**\n *\n * @throws {RequiredError}\n * @export\n */\nexport const assertParamExists = function (functionName: string, paramName: string, paramValue: unknown) {\n    if (paramValue === null || paramValue === undefined) {\n        throw new RequiredError(paramName, `Required parameter ${paramName} was null or undefined when calling ${functionName}.`);\n    }\n}\n\n/**\n *\n * @export\n */\nexport const setApiKeyToObject = async function (object: any, keyParamName: string, configuration?: Configuration) {\n    if (configuration && configuration.apiKey) {\n        const localVarApiKeyValue = typeof configuration.apiKey === 'function'\n            ? await configuration.apiKey(keyParamName)\n            : await configuration.apiKey;\n        object[keyParamName] = localVarApiKeyValue;\n    }\n}\n\n/**\n *\n * @export\n */\nexport const setBasicAuthToObject = function (object: any, configuration?: Configuration) {\n    if (configuration && (configuration.username || configuration.password)) {\n        object[\"auth\"] = { username: configuration.username, password: configuration.password };\n    }\n}\n\n/**\n *\n * @export\n */\nexport const setBearerAuthToObject = async function (object: any, configuration?: Configuration) {\n    if (configuration && configuration.accessToken) {\n        const accessToken = typeof configuration.accessToken === 'function'\n            ? await configuration.accessToken()\n            : await configuration.accessToken;\n        object[\"Authorization\"] = \"Bearer \" + accessToken;\n    }\n}\n\n/**\n *\n * @export\n */\nexport const setOAuthToObject = async function (object: any, name: string, scopes: string[], configuration?: Configuration) {\n    if (configuration && configuration.accessToken) {\n        const localVarAccessTokenValue = typeof configuration.accessToken === 'function'\n            ? await configuration.accessToken(name, scopes)\n            : await configuration.accessToken;\n        object[\"Authorization\"] = \"Bearer \" + localVarAccessTokenValue;\n    }\n}\n\n/**\n *\n * @export\n */\nexport const setSearchParams = function (url: URL, ...objects: any[]) {\n    const searchParams = new URLSearchParams(url.search);\n    for (const object of objects) {\n        for (const key in object) {\n            if (Array.isArray(object[key])) {\n                searchParams.delete(key);\n                for (const item of object[key]) {\n                    searchParams.append(key, item);\n                }\n            } else {\n                searchParams.set(key, object[key]);\n            }\n        }\n    }\n    url.search = searchParams.toString();\n}\n\n/**\n *\n * @export\n */\nexport const serializeDataIfNeeded = function (value: any, requestOptions: any, configuration?: Configuration) {\n    const nonString = typeof value !== 'string';\n    const needsSerialization = nonString && configuration && configuration.isJsonMime\n        ? configuration.isJsonMime(requestOptions.headers['Content-Type'])\n        : nonString;\n    return needsSerialization\n        ? JSON.stringify(value !== undefined ? value : {})\n        : (value || \"\");\n}\n\n/**\n *\n * @export\n */\nexport const toPathString = function (url: URL) {\n    return url.pathname + url.search + url.hash\n}\n\n/**\n *\n * @export\n */\nexport const createRequestFunction = function (axiosArgs: RequestArgs, globalAxios: AxiosInstance, BASE_PATH: string, configuration?: Configuration) {\n    return (axios: AxiosInstance = globalAxios, basePath: string = BASE_PATH) => {\n        const axiosRequestArgs = {...axiosArgs.options, url: (configuration?.basePath || basePath) + axiosArgs.url};\n        return axios.request(axiosRequestArgs);\n    };\n}\n","// export functions to get and set designer current image id\r\n// using local storage\r\n\r\nexport function getDesignerCurrentImageId(): string | null {\r\n    return localStorage.getItem('designerCurrentImageId');\r\n}\r\n\r\nexport function setDesignerCurrentImageId(id: string | null): void {\r\n    if (id) {\r\n        localStorage.setItem('designerCurrentImageId', id);\r\n    } else {\r\n        localStorage.removeItem('designerCurrentImageId');\r\n    }\r\n}\r\n","// react bootstrap large modal with a canvas for image editing.\n// Brush size, brush size preview, color selector, color picker\n// Save and cancel buttons\n\nimport React, { FC, useState, useEffect } from 'react';\nimport { Modal } from \"react-bootstrap\";\n\ninterface ImageEditorProps {\n    encodedImage: string | null;\n    onSave: (image: string) => void;\n    onCancel: () => void;\n}\n\nexport const ImageEditor: FC<ImageEditorProps> = ({ encodedImage, onSave, onCancel }) => {\n    const [canvas, setCanvas] = useState<HTMLCanvasElement | null>(null);\n    const [ctx, setCtx] = useState<CanvasRenderingContext2D | null>(null);\n    const [brushSize, setBrushSize] = useState(10);\n    const [brushColor, setBrushColor] = useState('#000000');\n    const [isDrawing, setIsDrawing] = useState(false);\n    const [lastX, setLastX] = useState(0);\n    const [lastY, setLastY] = useState(0);\n\n    useEffect(() => {\n        const c = document.getElementById('canvas') as HTMLCanvasElement;\n        if (c) {\n            setCanvas(c);\n            setCtx(c.getContext('2d'));\n        }\n    }, [canvas]);\n\n    useEffect(() => {\n        if (ctx && canvas) {\n            // if image is not null, draw it on the canvas\n            if (encodedImage) {\n                const img = new Image();\n                img.src = encodedImage;\n                img.onload = () => {\n                    ctx.drawImage(img, 0, 0);\n                }\n            } else {\n                ctx.fillStyle = '#ffffff';\n                ctx.fillRect(0, 0, canvas.width, canvas.height);\n            }\n        }\n    }, [ctx, canvas, encodedImage])\n\n    const getMousePos = (e: React.MouseEvent<HTMLCanvasElement> | React.TouchEvent<HTMLCanvasElement>) => {\n        if (!canvas) {\n            throw Error(\"No canvas\")\n        }\n        const rect = canvas.getBoundingClientRect();\n        const scaleX = canvas.width / rect.width;\n        const scaleY = canvas.height / rect.height;\n        if (e.nativeEvent instanceof MouseEvent) {\n            const evt = e as React.MouseEvent<HTMLCanvasElement>;\n            return {\n                x: (evt.clientX - rect.left) * scaleX,\n                y: (evt.clientY - rect.top) * scaleY\n            }\n        } else if (e.nativeEvent instanceof TouchEvent) {\n            const evt = e as React.TouchEvent<HTMLCanvasElement>;\n            return {\n                x: (evt.touches[0].clientX - rect.left) * scaleX,\n                y: (evt.touches[0].clientY - rect.top) * scaleY\n            }\n        }\n        console.log(e)\n        throw new Error(\"event is not MouseEvent or TouchEvent\")\n    }\n\n    const handleMouseDown = (e: React.MouseEvent<HTMLCanvasElement> | React.TouchEvent<HTMLCanvasElement>) => {\n        if (!canvas) {\n            return;\n        }\n        setIsDrawing(true);\n        const mousePos = getMousePos(e);\n        setLastX(mousePos.x);\n        setLastY(mousePos.y);\n        // draw a single dot in case the user clicks without moving the mouse\n        drawDot(mousePos.x, mousePos.y);\n    };\n\n    const drawDot = (x: number, y: number) => {\n        if (!ctx) {\n            return;\n        }\n        ctx.fillStyle = brushColor;\n        ctx.beginPath();\n        ctx.arc(x, y, brushSize / 2, 0, Math.PI * 2);\n        ctx.fill();\n    }\n\n    const handleMouseMove = (e: React.MouseEvent<HTMLCanvasElement> | React.TouchEvent<HTMLCanvasElement>) => {\n        if (!isDrawing || !ctx || !canvas) {\n            return;\n        }\n\n        e.preventDefault()\n        // get x and y relative to the canvas\n        const mousePos = getMousePos(e);\n        const x = mousePos.x;\n        const y = mousePos.y;\n\n        ctx.beginPath();\n        ctx.moveTo(lastX, lastY);\n        ctx.lineTo(x, y);\n        ctx.strokeStyle = brushColor;\n        ctx.lineWidth = brushSize;\n        // line caps\n        ctx.lineCap = 'round';\n        ctx.stroke();\n\n        setLastX(x);\n        setLastY(y);\n    };\n\n    const handleMouseUp = (e: React.MouseEvent<HTMLCanvasElement> | React.TouchEvent<HTMLCanvasElement>) => {\n        setIsDrawing(false);\n    };\n\n    const handleBrushSizeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setBrushSize(parseFloat(e.target.value));\n    };\n\n    const handleBrushColorChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setBrushColor(e.target.value);\n    };\n\n    const handleSave = () => {\n        if (canvas && ctx) {\n            const data = canvas.toDataURL('image/png');\n            onSave(data);\n        }\n    };\n\n    const handleCancel = () => {\n        onCancel();\n    };\n\n    return (\n        <Modal show={true} onHide={handleCancel} size=\"lg\">\n            <Modal.Header closeButton>\n                <Modal.Title>Image Editor</Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n                <canvas\n                    style={{ width: \"100%\" }}\n                    id=\"canvas\"\n                    width=\"512\"\n                    height=\"512\"\n                    onMouseDown={handleMouseDown}\n                    onMouseMove={handleMouseMove}\n                    onMouseUp={handleMouseUp}\n                    onTouchStart={handleMouseDown}\n                    onTouchMove={handleMouseMove}\n                    onTouchEnd={handleMouseUp}\n                ></canvas>\n                <div className=\"row\">\n                    <div className=\"col-md-6\">\n                        <div className=\"form-group\">\n                            <label htmlFor=\"brushSize\">Brush Size</label>\n                            <input type=\"range\" className=\"form-control\" id=\"brushSize\" min=\"1\" max=\"100\" value={brushSize} onChange={handleBrushSizeChange} />\n                        </div>\n\n                    </div>\n                    <div className=\"col-md-6\">\n                        <div className=\"form-group\">\n                            <label htmlFor=\"brushColor\">Brush Color</label>\n                            <input type=\"color\" className=\"form-control\" id=\"brushColor\" value={brushColor} onChange={handleBrushColorChange} />\n                        </div>\n                    </div>\n                </div>\n            </Modal.Body>\n            <Modal.Footer>\n                <button className=\"btn btn-primary\" onClick={handleSave}>Save</button>\n                <button className=\"btn btn-secondary\" onClick={handleCancel}>Cancel</button>\n            </Modal.Footer>\n        </Modal>\n    );\n}","import { ImageStatusEnum } from \"../client/api\";\n\n// map from image status to font awesome class\n// possible values: Pending, Processing, Completed, Saved\nexport const imageStatusToIconClass = (status: ImageStatusEnum) => {\n    switch (status) {\n        case ImageStatusEnum.Pending:\n            return \"fas fa-hourglass-start\";\n        case ImageStatusEnum.Processing:\n            return \"fas fa-cog fa-spin\";\n        case ImageStatusEnum.Completed:\n            return \"fas fa-check\";\n        case ImageStatusEnum.Saved:\n            return \"fas fa-save\";\n        default:\n            return \"\";\n    }\n}","import React, { FC, useState, useEffect } from 'react';\nimport { useHistory } from \"react-router-dom\"\nimport { AIBrushApi, CreateImageInput } from \"../client/api\"\nimport loadImage from \"blueimp-load-image\"\nimport qs from \"qs\";\nimport { ImageEditor } from \"../components/ImageEditor\";\n\ninterface CreateImageProps {\n    api: AIBrushApi\n    apiUrl: string;\n}\n\nexport const CreateImage: FC<CreateImageProps> = (props) => {\n    const searchParams = qs.parse(window.location.search.substring(1)) as any\n\n    const history = useHistory()\n    const [input, setInput] = useState<CreateImageInput>({\n        phrases: [],\n        label: \"\",\n        iterations: 100,\n        encoded_image: \"\",\n        enable_video: false,\n    });\n    const [editingImage, setEditingImage] = useState<string | null>(null);\n    const [count, setCount] = useState(1)\n\n    const onSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        for (let i = 0; i < count; i++) {\n            await props.api.createImage(input);\n        }\n\n        // redirect to images page\n        history.push(\"/images\")\n    }\n\n    const onCancel = () => {\n        // on cancel, return to the previous page\n        // check if there is a previous page. if not, redirect to home\n        if (history.length > 1) {\n            history.goBack()\n        } else {\n            history.push(\"/\")\n        }\n    }\n\n    const onImageSelected = async (e: React.ChangeEvent<HTMLInputElement>) => {\n        const file = e.target.files && e.target.files[0]\n        if (!file) {\n            return\n        }\n        loadImage(file, (img: Event | HTMLImageElement | HTMLCanvasElement) => {\n            if (!(img instanceof HTMLCanvasElement)) {\n                return\n            }\n            // convert image to base64\n            const canvas = img as HTMLCanvasElement\n            const dataUrl = canvas.toDataURL(\"image/jpeg\")\n            const base64 = dataUrl.split(\",\")[1]\n            setInput({\n                ...input,\n                encoded_image: base64\n            })\n        }, {\n            maxWidth: 512,\n            maxHeight: 512,\n            crop: true,\n            canvas: true,\n        })\n    }\n\n    \n\n    const onEditImage = () => {\n        let img = input.encoded_image;\n        if (!img) {\n            // blank 512 x 512 image with white background\n            // create a new canvas\n            const canvas = document.createElement(\"canvas\")\n            canvas.width = 512\n            canvas.height = 512\n            const ctx = canvas.getContext(\"2d\")\n            if (ctx) {\n                ctx.fillStyle = \"white\"\n                ctx.fillRect(0, 0, 512, 512)\n                img = canvas.toDataURL(\"image/jpeg\").split(\",\")[1]\n            }\n        }\n        if (img) {\n            setEditingImage(`data:image/jpeg;base64,${img}`)\n        }\n    }\n\n    const onImageEdited = (imageUri: string) => {\n        // extract base64 portion of the image uri\n        const base64 = imageUri.split(\",\")[1]\n        setInput({\n            ...input,\n            encoded_image: base64\n        })\n        setEditingImage(null)\n    }\n\n    useEffect(() => {\n\n        const loadParent = async (parentId: string) => {\n            const image = await props.api.getImage(parentId)\n            // get encoded image data for parent\n            const resp = await props.api.getImageData(image.data.id, {\n                responseType: \"arraybuffer\"\n            })\n            const binaryImageData = Buffer.from(resp.data, \"binary\");\n            // convert binary to base64\n            const base64ImageData = binaryImageData.toString(\"base64\");\n            setInput(input => ({\n                ...input,\n                label: image.data.label,\n                phrases: image.data.phrases,\n                iterations: image.data.iterations,\n                parent: parentId,\n                encoded_image: base64ImageData,\n                enable_video: !!image.data.enable_video,\n            }))\n        }\n\n        if (searchParams.parent) {\n            loadParent(searchParams.parent)\n        }\n    }, [searchParams.parent, setInput, props.api])\n\n    return (\n        <>\n            <div className=\"container\">\n                {/* Header: Create new image */}\n                <div className=\"row\">\n                    <div className=\"col-12\">\n                        <h1>Create new image</h1>\n                    </div>\n                </div>\n            </div>\n            {/* 50px vertical spacer */}\n            <div className=\"row\">\n                <div className=\"col-12\">\n                    <div className=\"spacer\" />\n                </div>\n            </div>\n            <div className=\"row\">\n                <div className=\"offset-lg-3 col-lg-6 col-sm-12\">\n                    <form onSubmit={onSubmit}>\n                        <div className=\"form-group\">\n                            <label>Phrases</label>\n                            <input\n                                className=\"form-control\"\n                                type=\"text\"\n                                value={input.phrases?.join(\"|\")}\n                                onChange={(e) => setInput({ ...input, phrases: e.target.value.split(\"|\") })}\n                                placeholder=\"Separate | phrases | like this\" />\n                        </div>\n                        <div className=\"form-group\">\n                            <label>Label</label>\n                            <input\n                                className=\"form-control\"\n                                type=\"text\"\n                                value={input.label}\n                                onChange={(e) => setInput({ ...input, label: e.target.value })}\n                                placeholder=\"Label\" />\n                        </div>\n                        <div className=\"form-group\">\n                            <label>Iterations</label>\n                            <input min={1} max={1000} className=\"form-control\" type=\"number\" value={input.iterations} onChange={(e) => setInput({ ...input, iterations: parseInt(e.target.value) })} />\n                        </div>\n                        {/* count */}\n                        <div className=\"form-group\">\n                            <label>Count</label>\n                            <input className=\"form-control\" type=\"number\" max={10} min={1} value={count} onChange={(e) => setCount(parseInt(e.target.value))} />\n                        </div>\n                        {/* boolean enable_video (bootstrap styled checkbox) */}\n                        <div className=\"form-group\">\n                            <label style={{marginRight: \"10px\"}}>Enable video</label>\n                            <div className=\"form-check\">\n                                <input className=\"form-check-input\" type=\"checkbox\" checked={input.enable_video} onChange={(e) => setInput({ ...input, enable_video: e.target.checked })} />\n                            </div>\n                        </div>\n\n                        {/* If encoded_image (base64 only) is set, show the image using a base64 image url*/}\n                        {input.encoded_image && <div className=\"form-group\">\n                            <h5>Initial Image</h5>\n                            <img alt=\"\" src={`data:image/jpeg;base64,${input.encoded_image}`} style={{ maxWidth: \"100%\" }} />\n                        </div>}\n                        {/* If encoded_image is set, display edit button */}\n                        <div className=\"form-group\">\n                            <label\n                                id=\"loadimage-wrapper\"\n                                className={`btn btn-sm btn-primary btn-file`}\n                                style={{ marginTop: \"8px\", marginRight: \"8px\" }}\n                            >\n                                {input.encoded_image ? \"Replace Image\" : \"Upload Image\"}\n                                <input\n                                    id=\"loadimage\"\n                                    type=\"file\"\n                                    style={{ display: \"none\" }}\n                                    onChange={e => onImageSelected(e)}\n                                />\n                            </label>\n                            <button type=\"button\" className=\"btn btn-sm btn-primary\" onClick={onEditImage}>Edit Image</button>\n                        </div>\n\n                        <div className=\"form-group\">\n                            {/* Cancel button \"/\" */}\n                            <button onClick={onCancel} type=\"button\" className=\"btn btn-secondary\">Cancel</button>\n                            &nbsp;\n                            <button type=\"submit\" className=\"btn btn-primary\">Create</button>\n                        </div>\n\n                    </form>\n                </div>\n            </div>\n            {editingImage && (\n                <ImageEditor\n                    encodedImage={`${editingImage}`}\n                    onCancel={() => setEditingImage(null)}\n                    onSave={onImageEdited}\n                />\n            )}\n        </>\n    )\n\n\n}","import React, { FC, useState, useEffect } from 'react';\r\nimport loadImage from \"blueimp-load-image\"\r\n\r\nimport { AIBrushApi, Image, CreateImageInput, ImageStatusEnum } from \"../client/api\";\r\nimport { getDesignerCurrentImageId, setDesignerCurrentImageId } from \"../lib/designer\";\r\nimport { imageStatusToIconClass } from '../lib/iconhelper';\r\nimport { ImageEditor } from '../components/ImageEditor';\r\n\r\ninterface InteractiveDesignerProps {\r\n    api: AIBrushApi;\r\n    apiUrl: string;\r\n}\r\n\r\nexport const InteractiveDesigner: FC<InteractiveDesignerProps> = ({ api }) => {\r\n\r\n    const [image, setImage] = useState<Image | null>(null);\r\n    const [input, setInput] = useState<CreateImageInput>({\r\n        phrases: [],\r\n        label: \"\",\r\n        iterations: 100,\r\n        encoded_image: \"\",\r\n        enable_video: false,\r\n    });\r\n    const [currentImageId, setCurrentImageId] = useState<string | null>(getDesignerCurrentImageId());\r\n    const [editingImage, setEditingImage] = useState<string | null>(null);\r\n\r\n\r\n\r\n\r\n\r\n    const onImageSelected = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files && e.target.files[0]\r\n        if (!file) {\r\n            return\r\n        }\r\n        loadImage(file, (img: Event | HTMLImageElement | HTMLCanvasElement) => {\r\n            if (!(img instanceof HTMLCanvasElement)) {\r\n                return\r\n            }\r\n            // convert image to base64\r\n            const canvas = img as HTMLCanvasElement\r\n            const dataUrl = canvas.toDataURL(\"image/jpeg\")\r\n            const base64 = dataUrl.split(\",\")[1]\r\n            setInput({\r\n                ...input,\r\n                encoded_image: base64\r\n            })\r\n        }, {\r\n            maxWidth: 512,\r\n            maxHeight: 512,\r\n            crop: true,\r\n            canvas: true,\r\n        })\r\n    }\r\n\r\n    const onPlay = async () => {\r\n        const resp = await api.createImage({\r\n            ...input,\r\n            parent: currentImageId || undefined,\r\n        });\r\n        if (resp.data) {\r\n            setDesignerCurrentImageId(resp.data.id);\r\n            setCurrentImageId(resp.data.id);\r\n            setImage(resp.data);\r\n        }\r\n    }\r\n\r\n    const renderPlayButton = () => {\r\n        const playButton = <button type=\"button\" className=\"btn btn-primary\" onClick={onPlay}>\r\n            {/* Play icon */}\r\n            <i className=\"fas fa-play\" />\r\n        </button>\r\n        if (!image || image.status === \"completed\" || image.status === \"saved\") {\r\n            return playButton;\r\n        }\r\n        return (\r\n            <button type=\"button\" className=\"btn btn-primary\" disabled={true}>\r\n                <i className={imageStatusToIconClass(image.status as ImageStatusEnum)}></i>&nbsp;\r\n            </button>\r\n        )\r\n    }\r\n\r\n    const onEditImage = () => {\r\n        let img = input.encoded_image;\r\n        if (!img) {\r\n            // blank 512 x 512 image with white background\r\n            // create a new canvas\r\n            const canvas = document.createElement(\"canvas\")\r\n            canvas.width = 512\r\n            canvas.height = 512\r\n            const ctx = canvas.getContext(\"2d\")\r\n            if (ctx) {\r\n                ctx.fillStyle = \"white\"\r\n                ctx.fillRect(0, 0, 512, 512)\r\n                img = canvas.toDataURL(\"image/jpeg\").split(\",\")[1]\r\n            }\r\n        }\r\n        if (img) {\r\n            setEditingImage(`data:image/jpeg;base64,${img}`)\r\n        }\r\n    }\r\n\r\n    const onImageEdited = (imageUri: string) => {\r\n        // extract base64 portion of the image uri\r\n        const base64 = imageUri.split(\",\")[1]\r\n        setInput({\r\n            ...input,\r\n            encoded_image: base64\r\n        })\r\n        setEditingImage(null)\r\n    }\r\n\r\n    useEffect(() => {\r\n\r\n        const loadImageData = async (id: string) => {\r\n            try {\r\n                const resp = await api.getImageData(id, {\r\n                    responseType: \"arraybuffer\"\r\n                })\r\n                const binaryImageData = Buffer.from(resp.data, \"binary\");\r\n                // convert binary to base64\r\n                const base64ImageData = binaryImageData.toString(\"base64\");\r\n                setInput(input => ({\r\n                    ...input,\r\n                    encoded_image: base64ImageData,\r\n                }))\r\n            } catch (err) {\r\n                console.error(err);\r\n            }\r\n        }\r\n\r\n        const fetchImage = async () => {\r\n            if (!currentImageId) {\r\n                return;\r\n            }\r\n            try {\r\n                const resp = await api.getImage(currentImageId);\r\n                setImage(image => {\r\n                    if (resp.data) {\r\n                        // TODO: if updated_at has changed, load image data\r\n                        if (!image || image.updated_at !== resp.data.updated_at) {\r\n                            loadImageData(currentImageId);\r\n                            setInput(input => ({\r\n                                ...input,\r\n                                phrases: resp.data.phrases,\r\n                                label: resp.data.label,\r\n                                iterations: resp.data.iterations,\r\n                                enable_video: resp.data.enable_video,\r\n                            }))\r\n                            return resp.data;\r\n                        }\r\n                    }\r\n                    return image;\r\n                });\r\n            } catch (err) {\r\n                console.error(err)\r\n                // clear current image id\r\n                setCurrentImageId(null);\r\n                // clear image id in local storage\r\n                setDesignerCurrentImageId(null);\r\n            }\r\n        }\r\n\r\n        fetchImage();\r\n        const timer = setInterval(fetchImage, 2000);\r\n        return () => clearInterval(timer);\r\n    }, [currentImageId, api])\r\n\r\n    const inprogress = (image && (image.status === \"pending\" || image.status === \"processing\")) || false;\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"row\">\r\n                <div className=\"col-12\">\r\n                    <h1>Interactive Designer</h1>\r\n                </div>\r\n            </div>\r\n            <div className=\"row\">\r\n                <div className=\"col-12\">\r\n                    <div className=\"spacer\" />\r\n                </div>\r\n            </div>\r\n            <div className=\"row\">\r\n                <div className=\"offset-lg-3 col-lg-6 col-sm-12\">\r\n                    <form onSubmit={e => e.preventDefault()}>\r\n                        <div className=\"form-group\">\r\n                            <label>Phrases</label>\r\n                            <input\r\n                                disabled={inprogress}\r\n                                className=\"form-control\"\r\n                                type=\"text\"\r\n                                value={input.phrases?.join(\"|\")}\r\n                                onChange={(e) => setInput({ ...input, phrases: e.target.value.split(\"|\") })}\r\n                                placeholder=\"Separate | phrases | like this\" />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label>Label</label>\r\n                            <input\r\n                                disabled={inprogress}\r\n                                className=\"form-control\"\r\n                                type=\"text\"\r\n                                value={input.label}\r\n                                onChange={(e) => setInput({ ...input, label: e.target.value })}\r\n                                placeholder=\"Label\" />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label>Iterations</label>\r\n                            <input disabled={inprogress} min={1} max={1000} className=\"form-control\" type=\"number\" value={input.iterations} onChange={(e) => setInput({ ...input, iterations: parseInt(e.target.value) })} />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label style={{ marginRight: \"10px\" }}>Enable video</label>\r\n                            <div className=\"form-check\">\r\n                                <input className=\"form-check-input\" type=\"checkbox\" checked={input.enable_video} onChange={(e) => setInput({ ...input, enable_video: e.target.checked })} />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* If encoded_image (base64 only) is set, show the image using a base64 image url*/}\r\n                        {input.encoded_image && <div className=\"form-group\">\r\n                            <h5>Image</h5>\r\n                            <img alt=\"\" src={`data:image/jpeg;base64,${input.encoded_image}`} style={{ maxWidth: \"100%\" }} />\r\n                        </div>}\r\n                        <div className=\"form-group\">\r\n                            {image && image.status === \"processing\" && <div className=\"progress\">\r\n                                <div className=\"progress-bar\" role=\"progressbar\" style={{ width: `${(image.current_iterations * 1.0) / image.iterations * 100}%` }}>\r\n                                </div>\r\n                            </div>}\r\n                        </div>\r\n                        {/* If encoded_image is set, display edit button */}\r\n                        <div className=\"form-group\">\r\n                            <label\r\n                                id=\"loadimage-wrapper\"\r\n                                className={`btn btn-primary btn-file`}\r\n                                style={{ marginTop: \"8px\" }}\r\n                            >\r\n                                {/* Browse font-awesome icon */}\r\n                                <i className=\"fas fa-upload\" />\r\n\r\n                                <input\r\n                                    disabled={inprogress}\r\n                                    id=\"loadimage\"\r\n                                    type=\"file\"\r\n                                    style={{ display: \"none\" }}\r\n                                    onChange={e => onImageSelected(e)}\r\n                                />\r\n                            </label>&nbsp;\r\n                            {renderPlayButton()}&nbsp;\r\n                            <button disabled={inprogress} type=\"button\" className=\"btn btn-primary\" onClick={onEditImage}>\r\n                                {/* Edit icon */}\r\n                                <i className=\"fas fa-edit\" />\r\n                            </button>\r\n                        </div>\r\n\r\n\r\n                    </form>\r\n                </div>\r\n            </div>\r\n            {editingImage && (\r\n                <ImageEditor\r\n                    encodedImage={`${editingImage}`}\r\n                    onCancel={() => setEditingImage(null)}\r\n                    onSave={onImageEdited}\r\n                />\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n"],"sourceRoot":""}